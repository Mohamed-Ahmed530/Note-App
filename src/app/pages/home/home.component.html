<div class="container">
    
    <button type="button" class="btn btn-main d-block mx-auto my-5" data-bs-toggle="modal" data-bs-target="#addNote">
        <i class="fa-solid fa-plus me-1"></i>
        Add New Note
    </button>

    <div class="my-2 input-search">
        <input [(ngModel)]="text" type="search" class="custom_input w-25" placeholder="Search..." >
    </div>

    <div class="modal fade" id="addNote" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="addNoteLabel" aria-hidden="true">
        <div class="modal-dialog">
            
            <div class="modal-content">
            
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="addNoteLabel">Add Note</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <form [formGroup]="addNoteForm" class="p-3 rounded-4 shadow-lg bg-white mt-4" (submit)="addNote()">
                    <div class="modal-body">
                    
                        <div class="my-3">
                            <label for="title">Title<b>:</b></label>
                            <input formControlName="title" id="title" class="custom_input" type="text">
                        </div>
                        
                        <div class="my-3">
                            <label for="content">Content<b>:</b></label>
                            <textarea formControlName="content" class="custom_input" id="content"></textarea>
                        </div>
                    
                    </div>
                    
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-main" data-bs-dismiss="modal">Post</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                    </div>
                    
                </form>
                
            </div>
        
        </div>
    </div>

    <!--  -->

    <div class="row g-3 my-2">
        @for (note of notesList | search: text ; track $index) {
            <div class="col-md-3 col-lg-4">
                <div class="inner shadow-lg rounded-4 p-3 overflow-hidden">
                    <h5 class="fw-bolder">Title: </h5>
                    <p> {{ note.title }} </p>
    
                    <h5 class="fw-bolder">Content: </h5>
                    <p> {{ note.content }} </p>
                    
                    <div class="d-flex">
                        <button class="btn btn-main mx-1 w-100" data-bs-toggle="modal" data-bs-target="#updateNote" (click)="patchValue(note)" >Update</button>
                        <button class="btn btn-danger mx-1 w-100" (click)="deleteNote(note._id)" >Delete</button>
                    </div>
    
                </div>
            </div>
        }
    </div>

    <!--  -->

    <div class="modal fade" id="updateNote" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="updateNoteLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="updateNoteLabel">Update Note</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
                <form [formGroup]="updateNoteForm" class="p-3 rounded-4 shadow-lg bg-white mt-4" (submit)="updateNote()">
                    <div class="modal-body">
                    
                        <div class="my-3">
                            <label for="title">Title<b>:</b></label>
                            <input formControlName="title" id="title" class="form-control" type="text">
                        </div>
                        
                        <div class="my-3">
                            <label for="content">Content<b>:</b></label>
                            <textarea formControlName="content" class="form-control" id="content"></textarea>
                        </div>
                    
                    </div>
                    
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-main"data-bs-dismiss="modal">Update</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                    </div>
                    
                </form>
            
            

            </div>
        </div>
    </div>

</div>