<section>

    <div class="inners">

        <form [formGroup]="registerForm" class="w-75 p-3 rounded-4 shadow-lg bg-white mx-auto mt-5" (submit)="registerUser()">
    
            <h1 class="text-main fw-light my-3">Register</h1>
    
            @if (errorMsg) {
                <div class="mt-1 alert alert-danger text-center w-75 mx-auto">
                        <p class="mb-0">{{errorMsg}}</p>
                    
                </div>
            }
    
            <div class="my-3">
                <label for="username">User Name<b>:</b></label>
                <input  formControlName="name" id="username" class="" type="text" [ngClass]="{
                'is-invalid':registerForm.get('name')?.errors && registerForm.get('name')?.touched,
                'is-valid':!registerForm.get('name')?.errors && registerForm.get('name')?.touched}">
    
                @if (registerForm.get("name")?.touched && registerForm.get("name")?.errors ) {
                    <div class="mt-1 alert alert-danger">
                        @if (registerForm.get("name")?.getError("required")) {
                            <p class="mb-0">Name is required</p>
                        }
                        @else if (registerForm.get("name")?.getError("minLength")) {
                            <p class="mb-0">Name Should be more than or equal  3 chars</p>
                        }
                        @else if (registerForm.get("name")?.getError("maxLength")) {
                            <p class="mb-0">Name Should be less than or equal  20 chars</p>
                        }
                    </div>
                }
    
    
    
            </div>
    
            <div class="my-3">
                <label for="email">Email<b>:</b></label>
                <input formControlName="email" id="email" class="" type="email" [ngClass]="{
                    'is-invalid':registerForm.get('email')?.errors && registerForm.get('email')?.touched,
                    'is-valid':!registerForm.get('email')?.errors && registerForm.get('email')?.touched}">
    
                @if (registerForm.get("email")?.touched && registerForm.get("email")?.errors ) {
                    <div class="mt-1 alert alert-danger">
                        @if (registerForm.get("email")?.getError("required")) {
                            <p class="mb-0">Email is required</p>
                        }
                        @else if (registerForm.get("email")?.getError("email")) {
                            <p class="mb-0">Enter Valid Email</p>
                        }
                    </div>
                }
    
            </div>
    
            <div class="my-3">
                <label for="password">Password<b>:</b></label>
                <div class="position-relative">
                <input formControlName="password" id="password" class="" [type]="!togilPassword? 'password' : 'text' "[ngClass]="{
                'is-invalid':registerForm.get('password')?.errors && registerForm.get('password')?.touched,
                'is-valid':!registerForm.get('password')?.errors && registerForm.get('password')?.touched}">

                    @if (!togilPassword) {
                        <span (click)="toggle()" class="togle position-absolute cursor top-0 end-0" > <i class="fa-solid fa-eye"></i> </span>
                    }@else{
                        <span (click)="toggle()" class="togle position-absolute cursor top-0 end-0" > <i class="fa-solid fa-eye-slash"></i> </span>
                    }

                </div>
    
                @if (registerForm.get("password")?.touched && registerForm.get("password")?.errors ) {
                    <div class="mt-1 alert alert-danger">
                        @if (registerForm.get("password")?.getError("required")) {
                            <p class="mb-0">password is required</p>
                        }
                        @else if (registerForm.get("password")?.getError("pattern")) {
                            <p class="mb-0">password must start with upperCase then from 6 to more any word chars</p>
                        }
                    </div>
                }
            </div>
    
            <div class="my-3">
                <label for="age">Age<b>:</b></label>
                <input formControlName="age" id="age" class="" type="number"[ngClass]="{
                'is-invalid':registerForm.get('age')?.errors && registerForm.get('age')?.touched,
                'is-valid':!registerForm.get('age')?.errors && registerForm.get('age')?.touched}">
    
            @if (registerForm.get("age")?.touched && registerForm.get("age")?.errors ) {
                <div class="mt-1 alert alert-danger">
                    @if (registerForm.get("age")?.getError("required")) {
                        <p class="mb-0">password is required</p>
                    }
                    @else if (registerForm.get("password")?.getError("min")) {
                        <p class="mb-0">age must be greater then 20</p>
                    }
                </div>
            }
    
            </div>
    
            <div class="my-3">
                <label for="phone">Phone<b>:</b></label>
                <input formControlName="phone" id="phone" class="" type="tel"[ngClass]="{
                    'is-invalid':registerForm.get('phone')?.errors && registerForm.get('phone')?.touched,
                    'is-valid':!registerForm.get('phone')?.errors && registerForm.get('phone')?.touched}">
    
            @if (registerForm.get("phone")?.touched && registerForm.get("phone")?.errors ) {
                <div class="mt-1 alert alert-danger">
                    @if (registerForm.get("phone")?.getError("required")) {
                        <p class="mb-0">password is required</p>
                    }
                    @else if (registerForm.get("password")?.getError("pattern")) {
                        <p class="mb-0">phone must be only egypt phone numbers</p>
                    }
                </div>
            }
    
            </div>
    
            <button type="submit" class="fw-light fs-5 btn-main"[disabled]="registerForm.invalid">Register
            @if (isvalid == true) {<span> <i class="fa fa-spin fa-spinner ms-2 text-white"></i> </span>}
            </button>
    
        </form>

    </div>


</section>
